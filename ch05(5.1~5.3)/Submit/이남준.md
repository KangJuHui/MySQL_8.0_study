## 7주차 Real MySQL 문제
#### 출제자: 강주희

### 1. 최적의 트렌젝션을 설계할 때 주의할 점으로 옳지 않은 설명을 고르시오.
1. 프로그램 코드에서 트랜잭션의 범위를 최소화하는 것이 좋다.
2. 네트워크 작업이 있는 경우에는 반드시 트랜잭션에서 배제해야 한다.
3. 데이터의 단순 확인 및 조회는 트랜잭션에 포함시키는 것이 좋다.
4. 작업의 성격이 다르다면 트랜젝션을 분리하는 것이 좋다.

답: 3


### 2. MySQL InnoDB의 잠금은 레코드를 잠그는 것이 아니라 인덱스를 잠그는 방식으로 처리된다. 즉, UPDATE 할 레코드를 찾기 위해 검색한 인덱스의 레코드를 모두 락을 걸어야 한다. 만약 테이블에 인덱스가 하나도 없다면 레코드를 UPDATE 할 때 어떤 방식으로 잠금을 수행할지 쓰시오.

답: ~~인덱스가 하나도 없는 테이블이더라도 내부적으로 자동 생성된 클러스터 인덱스를 이용해 잠금을 설정한다.~~<br>
-> 테이블을 풀 스캔하면서 UPDATE 작업을 하는데, 이 과정에서 테이블에 있는 모든 레코드를 잠그게 된다.

---
#### 출제자: 안해원
### 1. 다음 설명중 틀린것을 모두 고르시오
- (가) 잠금(lock)은 MySQL의 동시성을 재어하기 위한 기능이다
- (나) 네임드락을 이용하면 여러 클라이언트가 상호 동기화처리를 쉽게 할 수 있다
- (다) InnoDB 스토리지 엔진은 레코드락을 사용한다
- (라) 갭락(Gap Lock)은 레코드 자체를 잠근다

답: 다, 라

### 2. 다음 설명을 보고 클라이언트 간의 동시성을 높이기위한 가장  적절한 인덱스를 설정하시오.

- student테이블 컬럼으로는 age(나이), first_name(성), last_name(이름), grade(학년), gender(성별)이 있다.
- student테이블에는 30만건의 학생 레코드가 있다
- student테이블에서 age = '15'인 학생들이 400명 있고, first_name = "김"인 학생들이 100명 있다.
- student테이블에서 fisrt_name = "김" 이고, last_name="명수"인 학생들이 10명 있다.
- 학생들중 김이박이라는 이름을 가지고 있고, 나이가 13살인 학생이 개명을 하여 이름을 김이수로 바꾸려고 한다. 

답: `KEY ix_name_and_age (first_name, last_name, age)`